<div class="container">
  <div class="wrapper-tools-show">
    <div class="container">
      <div class="row">
        <div class="col-xs-12 col-sm-8">
            <%= render 'shared/card' %>
        </div>
        <div class="col-xs-12 col-sm-4">
          <div class="card-show text-center card-description-show">
          <img class="avatar-medium" src="<%= current_user.photo %>">
            <h2 class="before"><%= @tool.title %></h2>
            <p class="before"><%= @tool.description %>"</p>
            <% if @user != current_user %>
              <%= link_to "Rent it!", new_tool_booking_path(@tool), class: "search-button navbar-wagon-item navbar-wagon-button btn before" %>

            <% else %>
              <%= link_to "Edit", edit_tool_path(@tool), {class: "search-button navbar-wagon-item navbar-wagon-button btn"}%>
              <%= link_to "Destroy", tool_path(@tool), method: :delete, class: "search-button navbar-wagon-item navbar-wagon-button btn" %>
            <% end %>
            <%= link_to 'Back', :back, {class: "search-button navbar-wagon-item navbar-wagon-button btn"} %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="container">
  <% content_for(:after_js) do %>
    <%= javascript_tag do %>
        $(document).ready(function() {
          var coord = <%= raw @tool_coordinates.to_json %>;
      });
    <% end %>
  <% end %>
  <div id="map"></div>

   <!-- Include Google Maps JS library. You should use your *own* key -->
<script src="https://maps.google.com/maps/api/js?key=AIzaSyBbwelcSVjiDBrjQYgqNIk21M-yes5iVwA"></script>

<!-- Include Dependencies of GMaps for Rails gem -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-marker-clusterer/1.0.0/markerclusterer_compiled.js"></script>
    <script src="https://cdn.rawgit.com/printercu/google-maps-utility-library-v3-read-only/master/infobox/src/infobox_packed.js"></script>
<script src="https://cdn.rawgit.com/apneadiving/Google-Maps-for-Rails/master/js_compilation/gmaps_google.js"></script>

<script type="text/javascript">
      $(document).on('ready', function() {
        var handler = Gmaps.build('Google', { markers: { clusterer: undefined }});
        handler.buildMap({ internal: { id: 'map' } }, function(){
          markers = handler.addMarkers([
            @tool_coordinates
          ]);
        handler.bounds.extendWith(markers);
        handler.fitMapToBounds();
      });
    })
  </script>
</div>
